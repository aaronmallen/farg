use super::Observer;
use crate::{
  chromaticity::Xy,
  spectral::{ChromaticityCoordinates, Cmf, ConeFundamentals, ConeResponse, TristimulusResponse},
};

static CMF_DATA: [(u32, TristimulusResponse); 41] = [
  (370, TristimulusResponse::new(0.0008, 0.0001, 0.0046)),
  (380, TristimulusResponse::new(0.0045, 0.0004, 0.0224)),
  (390, TristimulusResponse::new(0.0201, 0.0015, 0.0925)),
  (400, TristimulusResponse::new(0.0611, 0.0045, 0.2799)),
  (410, TristimulusResponse::new(0.1267, 0.0093, 0.5835)),
  (420, TristimulusResponse::new(0.2285, 0.0175, 1.0622)),
  (430, TristimulusResponse::new(0.3081, 0.0273, 1.4526)),
  (440, TristimulusResponse::new(0.3312, 0.0379, 1.6064)),
  (450, TristimulusResponse::new(0.2888, 0.0468, 1.4717)),
  (460, TristimulusResponse::new(0.2323, 0.06, 1.288)),
  (470, TristimulusResponse::new(0.1745, 0.091, 1.1133)),
  (480, TristimulusResponse::new(0.092, 0.139, 0.7552)),
  (490, TristimulusResponse::new(0.0318, 0.208, 0.4461)),
  (500, TristimulusResponse::new(0.0048, 0.323, 0.2644)),
  (510, TristimulusResponse::new(0.0093, 0.503, 0.1541)),
  (520, TristimulusResponse::new(0.0636, 0.71, 0.0763)),
  (530, TristimulusResponse::new(0.1668, 0.862, 0.0412)),
  (540, TristimulusResponse::new(0.2926, 0.954, 0.02)),
  (550, TristimulusResponse::new(0.4364, 0.995, 0.0088)),
  (560, TristimulusResponse::new(0.597, 0.995, 0.0039)),
  (570, TristimulusResponse::new(0.7642, 0.952, 0.002)),
  (580, TristimulusResponse::new(0.9159, 0.87, 0.0016)),
  (590, TristimulusResponse::new(1.0225, 0.757, 0.0011)),
  (600, TristimulusResponse::new(1.0544, 0.631, 0.0007)),
  (610, TristimulusResponse::new(0.9922, 0.503, 0.0003)),
  (620, TristimulusResponse::new(0.8432, 0.381, 0.0002)),
  (630, TristimulusResponse::new(0.6327, 0.265, 0.0001)),
  (640, TristimulusResponse::new(0.4404, 0.175, 0.0)),
  (650, TristimulusResponse::new(0.2787, 0.107, 0.0)),
  (660, TristimulusResponse::new(0.1619, 0.061, 0.0)),
  (670, TristimulusResponse::new(0.0858, 0.032, 0.0)),
  (680, TristimulusResponse::new(0.0459, 0.017, 0.0)),
  (690, TristimulusResponse::new(0.0222, 0.0082, 0.0)),
  (700, TristimulusResponse::new(0.0113, 0.0041, 0.0)),
  (710, TristimulusResponse::new(0.0057, 0.0021, 0.0)),
  (720, TristimulusResponse::new(0.0028, 0.0011, 0.0)),
  (730, TristimulusResponse::new(0.0015, 0.0005, 0.0)),
  (740, TristimulusResponse::new(0.0005, 0.0002, 0.0)),
  (750, TristimulusResponse::new(0.0003, 0.0001, 0.0)),
  (760, TristimulusResponse::new(0.0002, 0.0001, 0.0)),
  (770, TristimulusResponse::new(0.0001, 0.0, 0.0)),
];

static CHROMATICITY_DATA: [(u32, Xy); 41] = [
  (370, Xy::new_const(0.14545454545454548, 0.018181818181818184)),
  (380, Xy::new_const(0.16483516483516483, 0.014652014652014654)),
  (390, Xy::new_const(0.1761612620508326, 0.013146362839614373)),
  (400, Xy::new_const(0.17684515195369033, 0.013024602026049204)),
  (410, Xy::new_const(0.17609451007644197, 0.01292564280750521)),
  (420, Xy::new_const(0.17466748203638588, 0.013377159455740714)),
  (430, Xy::new_const(0.17231543624161075, 0.015268456375838929)),
  (440, Xy::new_const(0.16765375854214123, 0.01918501645153126)),
  (450, Xy::new_const(0.15979638134233387, 0.02589498146406241)),
  (460, Xy::new_const(0.1469974055559071, 0.0379674745301525)),
  (470, Xy::new_const(0.12655932695097186, 0.06599941978532056)),
  (480, Xy::new_const(0.09328736564591361, 0.14094504157371732)),
  (490, Xy::new_const(0.0463624435048841, 0.3032512027992419)),
  (500, Xy::new_const(0.008105369807497466, 0.5454238432961837)),
  (510, Xy::new_const(0.013955582232893156, 0.7548019207683073)),
  (520, Xy::new_const(0.07483233321567244, 0.8353923991057771)),
  (530, Xy::new_const(0.15588785046728976, 0.8056074766355141)),
  (540, Xy::new_const(0.23101215853465976, 0.7531975367124586)),
  (550, Xy::new_const(0.30301347035134013, 0.6908762671851132)),
  (560, Xy::new_const(0.3740835891973181, 0.6234726486621969)),
  (570, Xy::new_const(0.4447677802351298, 0.554068210918403)),
  (580, Xy::new_const(0.5123916083916084, 0.4867132867132867)),
  (590, Xy::new_const(0.574244636639335, 0.42513759406941476)),
  (600, Xy::new_const(0.6253484372219916, 0.37423640353478443)),
  (610, Xy::new_const(0.6634570377800066, 0.33634236041457705)),
  (620, Xy::new_const(0.6886638353479255, 0.31117281934008495)),
  (630, Xy::new_const(0.7047226553798174, 0.2951659612385832)),
  (640, Xy::new_const(0.7156321091972702, 0.28436789080272995)),
  (650, Xy::new_const(0.7225823178636246, 0.2774176821363754)),
  (660, Xy::new_const(0.7263346792283535, 0.2736653207716465)),
  (670, Xy::new_const(0.7283531409168081, 0.27164685908319186)),
  (680, Xy::new_const(0.7297297297297296, 0.27027027027027023)),
  (690, Xy::new_const(0.7302631578947368, 0.26973684210526316)),
  (700, Xy::new_const(0.7337662337662337, 0.26623376623376627)),
  (710, Xy::new_const(0.7307692307692308, 0.2692307692307692)),
  (720, Xy::new_const(0.717948717948718, 0.2820512820512821)),
  (730, Xy::new_const(0.75, 0.25)),
  (740, Xy::new_const(0.7142857142857143, 0.28571428571428575)),
  (750, Xy::new_const(0.75, 0.25000000000000006)),
  (760, Xy::new_const(0.6666666666666666, 0.3333333333333333)),
  (770, Xy::new_const(1.0, 0.0)),
];

static CONE_FUNDAMENTALS_DATA: [(u32, ConeResponse); 41] = [
  (370, ConeResponse::new(2.8000000000007186e-07, -0.00025999, 0.00476043)),
  (
    380,
    ConeResponse::new(0.0005191500000000003, -0.0018684199999999995, 0.02321069),
  ),
  (390, ConeResponse::new(0.0034616100000000004, -0.00911402, 0.09591714)),
  (
    400,
    ConeResponse::new(0.01071355000000001, -0.027854139999999996, 0.29025358),
  ),
  (
    410,
    ConeResponse::new(0.021709790000000007, -0.05770033999999999, 0.60506318),
  ),
  (
    420,
    ConeResponse::new(0.037753270000000005, -0.10245171000000002, 1.10133102),
  ),
  (
    430,
    ConeResponse::new(0.048603390000000024, -0.13104765, 1.5057120000000002),
  ),
  (
    440,
    ConeResponse::new(0.04728072, -0.12456970999999997, 1.6642369700000001),
  ),
  (
    450,
    ConeResponse::new(0.033440020000000015, -0.08245456999999999, 1.5232908400000003),
  ),
  (
    460,
    ConeResponse::new(0.016032530000000017, -0.02419185999999998, 1.3310512700000001),
  ),
  (470, ConeResponse::new(0.000750730000000005, 0.06587671, 1.14680823)),
  (
    480,
    ConeResponse::new(-0.0025104799999999816, 0.19687394000000003, 0.77161122),
  ),
  (490, ConeResponse::new(0.011874840000000011, 0.34892351, 0.44629358)),
  (
    500,
    ConeResponse::new(0.04766952000000001, 0.55956302, 0.2502874600000001),
  ),
  (510, ConeResponse::new(0.11745189, 0.86056911, 0.12456763)),
  (520, ConeResponse::new(0.23375754, 1.17167249, 0.032397520000000006)),
  (530, ConeResponse::new(0.3722898, 1.35341568, -0.010138960000000002)),
  (540, ConeResponse::new(0.51282386, 1.41590448, -0.033374860000000006)),
  (550, ConeResponse::new(0.65426932, 1.37786818, -0.04212106000000001)),
  (560, ConeResponse::new(0.79881324, 1.25720623, -0.040918760000000005)),
  (
    570,
    ConeResponse::new(0.9373254200000001, 1.05802256, -0.03342542000000001),
  ),
  (
    580,
    ConeResponse::new(1.0513318500000002, 0.8036955399999999, -0.02231913),
  ),
  (
    590,
    ConeResponse::new(1.1167270100000002, 0.5300803700000001, -0.010946690000000007),
  ),
  (
    600,
    ConeResponse::new(1.11177886, 0.29023331000000013, -0.001486620000000009),
  ),
  (
    610,
    ConeResponse::new(1.0220690000000001, 0.11755307000000001, 0.0044499599999999985),
  ),
  (
    620,
    ConeResponse::new(0.8562144399999999, 0.020282200000000118, 0.006907899999999989),
  ),
  (
    630,
    ConeResponse::new(0.63690963, -0.020570370000000015, 0.006562489999999998),
  ),
  (
    640,
    ConeResponse::new(0.44082204, -0.030525579999999997, 0.005144060000000001),
  ),
  (
    650,
    ConeResponse::new(0.27796917000000004, -0.025736239999999994, 0.003511929999999999),
  ),
  (
    660,
    ConeResponse::new(0.16116708999999999, -0.016933879999999985, 0.0021194099999999995),
  ),
  (
    670,
    ConeResponse::new(0.08532438, -0.009535159999999994, 0.0011456199999999995),
  ),
  (
    680,
    ConeResponse::new(0.045613890000000004, -0.005304679999999999, 0.0006210099999999997),
  ),
  (
    690,
    ConeResponse::new(0.0220557, -0.0026037399999999985, 0.0003018799999999999),
  ),
  (
    700,
    ConeResponse::new(0.011206869999999999, -0.001451909999999998, 0.0001587199999999999),
  ),
  (
    710,
    ConeResponse::new(0.00566151, -0.0006777900000000006, 7.787999999999998e-05),
  ),
  (
    720,
    ConeResponse::new(0.00279932, -0.00021570999999999982, 3.356999999999998e-05),
  ),
  (
    730,
    ConeResponse::new(0.0014758500000000001, -0.0002685500000000001, 2.409999999999999e-05),
  ),
  (
    740,
    ConeResponse::new(0.0005008300000000001, -3.2399999999999974e-05, 5.7499999999999975e-06),
  ),
  (
    750,
    ConeResponse::new(0.00029517, -5.3709999999999945e-05, 4.819999999999998e-06),
  ),
  (
    760,
    ConeResponse::new(0.00020566, 2.1310000000000025e-05, 9.299999999999996e-07),
  ),
  (770, ConeResponse::new(8.951e-05, -7.502e-05, 3.89e-06)),
];

impl Observer {
  pub const CIE_1931_JUDD_2D: Self = Self::new(
    "CIE 1931 Judd",
    2.0,
    Cmf::new(&CMF_DATA),
    ChromaticityCoordinates::new(&CHROMATICITY_DATA),
    ConeFundamentals::new(&CONE_FUNDAMENTALS_DATA),
    None,
  );
}
